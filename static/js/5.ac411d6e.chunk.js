(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{302:function(e,a,s){e.exports=s.p+"static/media/user.44a5c053.png"},305:function(e,a,s){e.exports={dialogs:"Dialogs_dialogs__12UMW",dialogs__items:"Dialogs_dialogs__items__1-9OH",messages:"Dialogs_messages__3iAfy",messages__control:"Dialogs_messages__control__xfhjE",new__message:"Dialogs_new__message__PNZLV"}},307:function(e,a,s){e.exports={dialog:"DialogItem_dialog__jCvld",active:"DialogItem_active__3_aSe",date:"DialogItem_date__vvbjx",user__photo:"DialogItem_user__photo__19kHY",user__name:"DialogItem_user__name__3SMSK",unreaded:"DialogItem_unreaded__1PeQL"}},308:function(e,a,s){e.exports={message__wrapper:"Message_message__wrapper__3Z_Uo",message:"Message_message__1uRZh",message__info:"Message_message__info__C7_PY",author:"Message_author__3Nsut",time:"Message_time__1pNJJ",my:"Message_my__24d0M",unviewed:"Message_unviewed__3MJZe",selected:"Message_selected__2GaaA"}},318:function(e,a,s){"use strict";s.r(a);var t=s(29),n=s(30),i=s(33),o=s(31),c=s(34),l=s(0),g=s.n(l),r=s(305),m=s.n(r),d=s(67),_=s(307),u=s.n(_),p=s(302),v=s.n(p),f=function(e){return g.a.createElement("div",Object(d.a)({className:u.a.dialog,id:e.id,onClick:function(){e.getDialogMessages(e.id)}},"className",e.id===e.activeDialog?"".concat(u.a.active," ").concat(u.a.dialog):u.a.dialog),g.a.createElement("img",{className:u.a.user__photo,src:e.photos.small?e.photos.small:v.a,alt:"user"}),g.a.createElement("span",{className:u.a.user__name},e.userName," "),e.hasNewMessages&&g.a.createElement("span",{className:u.a.unreaded},e.newMessagesCount),g.a.createElement("span",{className:u.a.date},new Date(e.lastDialogActivityDate).toLocaleDateString("en")))},M=s(308),D=s.n(M),h=s(21),E=function(e){return g.a.createElement("div",{className:D.a.message__wrapper},g.a.createElement("div",{id:e.id,className:"\n                    ".concat(D.a.message," \n                    ").concat(e.viewed?"":D.a.unviewed," \n                    ").concat(e.recipientId===e.activeDialog?D.a.my:"","\n                    ").concat(e.isSelected?D.a.selected:""),onClick:function(){e.selectMessage(e.id)}},g.a.createElement("div",{className:D.a.message__info},g.a.createElement(h.b,{to:"/profile"+e.senderId,className:D.a.author},e.senderName),g.a.createElement("div",{className:D.a.time},new Date(e.addedAt).toLocaleDateString())),e.body))},b=s(89),w=s(130),N=s(64),j=s(36),O=Object(N.a)(100),y=Object(w.a)({form:"newMessage"})(function(e){return g.a.createElement("form",{onSubmit:e.handleSubmit},g.a.createElement(b.a,{component:j.b,name:"body",placeholder:"Enter whatever you want to say",validate:[N.b,O]}),g.a.createElement("button",null,"Send"))}),I=function(e){return g.a.createElement("div",{className:m.a.new__message},g.a.createElement(y,{onSubmit:function(a){e.sendMessage(e.dialogId,a)},dialogId:e.dialogId}))},S=function(e){var a=e.dialogs.map(function(a){return g.a.createElement(f,Object.assign({key:a.id},a,{getDialogMessages:e.getDialogMessages,activeDialog:e.activeDialog}))}),s=e.messages.map(function(a){return g.a.createElement(E,Object.assign({key:a.id},a,{isSelected:e.selectedMessages.includes(a.id),activeDialog:e.activeDialog,selectMessage:e.selectMessage}))}),t=Object(l.useRef)(null);return Object(l.useEffect)(function(){t.current.scrollIntoView({behavior:"smooth"})},[s]),g.a.createElement("div",{className:m.a.dialogs},g.a.createElement("div",{className:m.a.dialogs__items},a),g.a.createElement("div",{className:m.a.messages},s,g.a.createElement("div",{ref:t}),e.selectedMessages.length>0&&g.a.createElement("div",{className:m.a.messages__control},g.a.createElement("button",{onClick:function(){e.selectedMessages.forEach(function(a){e.removeMessage(a,e.activeDialog)})}},"Remove"),g.a.createElement("button",{onClick:function(){e.selectedMessages.forEach(function(a){e.spamMessage(a.id,e.activeDialog)})}},"Spam")),g.a.createElement(I,{sendMessage:e.sendMessage,dialogId:e.activeDialog})))},k=s(128),C=s(14),P=s(35),x=s(9),F=s(27),J=s(55),A=function(e){function a(){return Object(t.a)(this,a),Object(i.a)(this,Object(o.a)(a).apply(this,arguments))}return Object(c.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){this.props.getDialogs(),this.props.dialogs.length>0&&this.props.getDialogMessages(this.props.dialogs[0])}},{key:"render",value:function(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(J.a,{isFetching:this.props.isFetching}),g.a.createElement(S,this.props))}}]),a}(g.a.Component);a.default=Object(x.d)(Object(C.b)(function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,activeDialog:e.dialogsPage.activeDialog,selectedMessages:e.dialogsPage.selectedMessages,isFetching:e.dialogsPage.isFetching}},{sendMessage:k.f,getDialogs:k.c,getDialogMessages:k.b,selectMessage:k.e,removeMessage:k.d,spamMessage:k.g}),P.a,F.f)(A)}}]);
//# sourceMappingURL=5.ac411d6e.chunk.js.map